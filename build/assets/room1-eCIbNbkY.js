import{V as v,E as X,b as q,S as $,P as K,W as U,c as N,m as Y,M as u,d as I,e as Q,G as Z,T as L,f as S,g as A,D as T,B as P,i as J,j as ee,k as G,C as te,R as ne,a as oe,l as ie}from"./GLTFLoader-BdS0rLEc.js";var se=Object.defineProperty,re=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(re(e,typeof t!="symbol"?t+"":t,n),n);const w=new q(0,0,0,"YXZ"),f=new v,ae={type:"change"},ce={type:"lock"},le={type:"unlock"},_=Math.PI/2;class de extends X{constructor(t,n){super(),a(this,"camera"),a(this,"domElement"),a(this,"isLocked"),a(this,"minPolarAngle"),a(this,"maxPolarAngle"),a(this,"pointerSpeed"),a(this,"onMouseMove",o=>{if(!this.domElement||this.isLocked===!1)return;const i=o.movementX||o.mozMovementX||o.webkitMovementX||0,s=o.movementY||o.mozMovementY||o.webkitMovementY||0;w.setFromQuaternion(this.camera.quaternion),w.y-=i*.002*this.pointerSpeed,w.x-=s*.002*this.pointerSpeed,w.x=Math.max(_-this.maxPolarAngle,Math.min(_-this.minPolarAngle,w.x)),this.camera.quaternion.setFromEuler(w),this.dispatchEvent(ae)}),a(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(ce),this.isLocked=!0):(this.dispatchEvent(le),this.isLocked=!1))}),a(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),a(this,"connect",o=>{this.domElement=o||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),a(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),a(this,"dispose",()=>{this.disconnect()}),a(this,"getObject",()=>this.camera),a(this,"direction",new v(0,0,-1)),a(this,"getDirection",o=>o.copy(this.direction).applyQuaternion(this.camera.quaternion)),a(this,"moveForward",o=>{f.setFromMatrixColumn(this.camera.matrix,0),f.crossVectors(this.camera.up,f),this.camera.position.addScaledVector(f,o)}),a(this,"moveRight",o=>{f.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(f,o)}),a(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),a(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=t,this.domElement=n,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,n&&this.connect(n)}}const d=new $;let h,x,m;const me=()=>{h=new K(60,window.innerWidth/window.innerHeight,.1,1e3),d.add(h),h.position.set(0,4,0),m=new U({antialias:!1}),m.setSize(window.innerWidth,window.innerHeight),m.setClearColor(16777215,1),document.body.appendChild(m.domElement),m.shadowMap.enabled=!0,m.shadowMap.type=N,x=new de(h,m.domElement),d.add(x.getObject()),window.addEventListener("resize",e,!1);function e(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}return{camera:h,controls:x,renderer:m}},he=[{imgSrc:"./public/artworks/12.jpg",width:5,height:3,position:{x:0,y:3,z:-29.5},rotationY:0,id:1,info:{title:"Title",artist:"Rosa Bonheur",description:"This is one of the masterpieces by Vincent van Gogh, showcasing his unique style and emotional honesty. Artwork  perfectly encapsulates his love for the beauty of everyday life.",year:"Year 212",etudes:{key:"balto",link:"./balto.glb",position:{x:0,y:3,z:-29.5}}}},{imgSrc:"./public/artworks/1.jpg",width:5,height:3,position:{x:-19.9,y:3,z:-14},rotationY:Math.PI/2,id:2,info:{title:"Title",artist:"Rosa Bonheur",description:"This is one of the masterpieces by Vincent van Gogh, showcasing his unique style and emotional honesty. Artwork  perfectly encapsulates his love for the beauty of everyday life.",year:"Year 212",etudes:{key:"balto",link:"./balto.glb",position:{x:0,y:3,z:-10}}}}],D=new Map;function ue(e,t){const n=new Y;let o=[];return he.forEach(i=>{const s=t.load(i.imgSrc),r=new u(new I(i.width,i.height),new Q({map:s}));r.position.set(i.position.x,i.position.y,i.position.z),r.rotation.y=i.rotationY,r.userData=i.info,n.load(i.info.etudes.link,c=>{c.scene.position.set(i.position.x,i.position.y,i.position.z),c.scene.rotation.y=i.rotationY,c.scene.scale.set(3,3,3),c.scene.visible=!1,D.set(i.info.etudes.key,c.scene),e.add(c.scene),r.userData.modelKey=i.info.etudes.key}),e.add(r),o.push(r)}),o}function pe(e,t){let n=new Z;e.add(n),t=new L;const o=t.load("./../textures/blackwalls.jpg",g=>{g.wrapS=g.wrapT=S,g.repeat.set(7,3)}),i=new A({map:o,metalness:0,roughness:.3,side:T}),s=new u(new P(40,30,.001),i);s.position.z=-30;const r=new u(new P(40,30,.001),i);r.rotation.y=Math.PI/2,r.position.x=-20,r.position.z=-13;const c=new u(new P(40,30,.001),i);c.position.x=20,c.rotation.y=Math.PI/2,c.position.z=-13;const k=new u(new P(40,30,.001),i);return k.position.z=5,n.add(s,k,r,c),n}const we=(e,t)=>{const n=new J(16777215,1500);n.position.set(0,0,0),e.add(n);const o=new ee(n,1);e.add(o)},fe=e=>{const n=new L().load("../../textures/blackfloor.jpg",r=>{r.wrapS=r.wrapT=S,r.repeat.set(1,2)}),o=new A({map:n,side:T}),i=new I(40,45),s=new u(i,o);s.rotation.x=Math.PI/2,s.position.y=-Math.PI,s.position.z=-8,e.add(s)},ge=(e,t)=>{t=new L;const n=t.load("./../textures/blackwalls.jpg",r=>{r.wrapS=r.wrapT=S,r.repeat.set(3,3)}),o=new A({map:n,side:T}),i=new I(40,60),s=new u(i,o);s.rotation.x=Math.PI/2,s.position.y=15,e.add(s)},H=e=>{Array.isArray(e)||(e=e.children),e.forEach(t=>{t.BoundingBox=new G,t.BoundingBox.setFromObject(t)})},ye=(e,t)=>{console.log(e,"IMPORTANT ONE PASS INFO"),t.position.clone();const n=e.userData,o=document.getElementById("painting-info");if(o.innerHTML=`
    <h3>${n.title}</h3>
    <p>Artist: ${n.artist}</p>
    <p>Description: ${n.description}</p>
    <p>Year: ${n.year}</p>
  `,o.classList.add("show"),e.userData.modelKey){const i=D.get(e.userData.modelKey);i&&(i.visible=!0)}t.fov=80,t.updateProjectionMatrix()},ke=e=>{D.forEach(n=>{n.visible=!1}),e.fov=60,e.updateProjectionMatrix(),document.getElementById("painting-info").classList.remove("show")},l={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1},Ee=(e,t,n,o)=>{const i=5*e,s=n.position.clone();(l.ArrowRight||l.d)&&t.moveRight(i),(l.ArrowLeft||l.a)&&t.moveRight(-i),(l.ArrowUp||l.w)&&t.moveForward(i),(l.ArrowDown||l.s)&&t.moveForward(-i),Pe(n,o)&&n.position.copy(s)},Pe=(e,t)=>{const n=new G,o=new v;e.getWorldPosition(o),n.setFromCenterAndSize(o,new v(1,1,1));for(let i=0;i<t.children.length;i++){const s=t.children[i];if(n.intersectsBox(s.BoundingBox))return!0}return!1},ve=(e,t,n,o,i,s)=>{console.log("Setup painting in rendering",o);const r=new te;let c=function(){const k=r.getDelta();Ee(k,i,t,s);const g=8;console.log(o);let E;o.forEach(W=>{t.position.distanceTo(W.position)<g&&(E=W)}),E?(console.log("paintingToShow",E),ye(E,t)):ke(t),n.gammaOutput=!0,n.gammaFactor=2.2,n.render(e,t),requestAnimationFrame(c)};c()},O=()=>{const e=document.getElementById("menu");e.style.display="none"},M=()=>{const e=document.getElementById("menu");e.style.display="block"},Le=e=>{e.lock(),O()},be=e=>{document.getElementById("play_button").addEventListener("click",()=>Le(e))},xe=()=>{},Me=()=>{};let p=!0,y=!1;const Be=(e,t,n)=>{document.addEventListener("keydown",o=>Se(o,e),!1),document.addEventListener("keyup",o=>Ae(o),!1),e.addEventListener("unlock",()=>{y&&M(),y=!1}),document.getElementById("start_audio").addEventListener("click",xe),document.getElementById("stop_audio").addEventListener("click",Me)};function Ie(e){p?e.lock():(y=!1,e.unlock()),p=!p}function Se(e,t){e.key in l&&(l[e.key]=!0),e.key==="Escape"&&(M(),y=!0,t.unlock(),p=!1),e.key==="p"&&(t.unlock(),p=!1),(e.key==="Enter"||e.key==="Return")&&(O(),t.lock(),p=!0),e.key===" "&&Ie(t),e.key,e.key,e.key==="m"&&(M(),y=!0,t.unlock(),p=!1),e.key==="r"&&location.reload()}function Ae(e,t){e.key in l&&(l[e.key]=!1)}document.getElementById("toggle-info").addEventListener("click",()=>{document.getElementById("info-panel").classList.toggle("collapsed"),document.getElementById("toggle-info").innerText=document.getElementById("info-panel").classList.contains("collapsed")?"Show":"Hide"});document.getElementById("about_button").addEventListener("click",function(){document.getElementById("about-overlay").classList.add("show")});document.getElementById("close-about").addEventListener("click",function(){document.getElementById("about-overlay").classList.remove("show")});const Te=(e,t)=>{t.forEach(n=>{e.add(n)})},B=new oe,F=new ne;function De(e,t,n){e.domElement.addEventListener("click",o=>{B.x=o.clientX/window.innerWidth*2-1,B.y=-(o.clientY/window.innerHeight)*2+1,Ce(t,n)},!1)}function Ce(e,t){F.setFromCamera(B,e);const n=F.intersectObjects(t);if(n.length>0){const o=n[0].object;console.log("Clicked painting:",o.userData.info.title),window.open(o.userData.info.link,"_blank")}}const ze=e=>{e.xr.enabled=!0,e.xr.addEventListener("sessionstart",()=>{console.log("WebXR session started")}),e.xr.addEventListener("sessionend",()=>{console.log("WebXR session ended")}),document.body.appendChild(ie.createButton(e))},Re=e=>{const t=new Map,n=new Y;[{key:"balto",url:"./balto.glb",position:{x:0,y:3,z:-29.9},rotationY:0}].forEach(i=>{n.load(i.url,s=>{t.set(i.key,s.scene),s.scene.position.set(i.position.x,i.position.y,i.position.z),s.scene.rotation.y=i.rotationY,s.scene.scale.set(3,3,3),s.scene.visible=!1,e.add(s.scene)})})};let{camera:V,controls:C,renderer:z}=me();const R=new L,j=pe(d,R);fe(d);ge(d,R);const b=ue(d,R);we(d);H(j);H(b);Te(d,b);be(C);Be(C);De(z,V,b);ve(d,V,z,b,C,j);Re(d);ze(z);
